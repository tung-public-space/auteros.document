!function(e){"use strict";function t(){jQuery(".clever-mega-menu-popup").hide(),jQuery("#clever-mega-menu-overlay").hide(),jQuery(".clever-mega-menu-customize-vc-iframe-wrapper",jQuery("body")).length&&jQuery(".clever-mega-menu-customize-vc-iframe-wrapper",jQuery("body")).removeClass("clever-mega-menu-customize-show-vc").addClass("clever-mega-menu-customize-hide-vc")}window.clever_mega_menu_item_title="",window.currentEditItem={},jQuery(function(i){var e=i(i("#clever-mega-menu-settings").html());e&&(i("#update-nav-menu .menu-settings").append(e),"undefined"!=typeof wpNavMenu&&(wpNavMenu.menusChanged=!1)),i(function(){var e=i(".clever-mega-menu-item-icon"),n=i(".clever-mega-menu-item-edit-btn"),m=i("#clever-mega-menu-enable-checkbox"),t=i(".clever-mega-menu-advanced-setting");m.is(":checked")?(n.addClass("clever-mega-menu-active-edit-btn"),e.show(),t.show()):(n.removeClass("clever-mega-menu-active-edit-btn"),e.hide(),t.hide()),m.change(function(){m.is(":checked")?(n.addClass("clever-mega-menu-active-edit-btn"),e.show(),t.show()):(n.removeClass("clever-mega-menu-active-edit-btn"),e.hide(),t.hide())})})});var i=function(e){var m=this,n=jQuery;e.hasClass("menu-item-depth-0")?m.isChild=!1:m.isChild=!0,m.item=e,m.tpl=n(n("#clever-mega-menu-popup-tpl").html()),m.navId=n("#update-nav-menu #menu").val(),m.menuId=n("input.menu-item-data-db-id",e).val(),m.settings=!1,void 0!==cleverMenuItems[m.menuId]&&(m.settings=cleverMenuItems[m.menuId]),m.settings&&(""!==m.settings.cmm4e_icon&&n(".item-title",e).prepend('<span class="clever-mega-menu-item-icon"><i class="'+m.settings.cmm4e_icon+'"></i></span>'),"yes"===m.settings.enable_mega?e.addClass("clever-mega-menu-item-mega-enabled"):e.removeClass("clever-mega-menu-item-mega-enabled")),m.autoFrameHeight=function(){m.tpl.css({top:0,right:0,bottom:0,left:0}),n(".clever-mega-menu-popup").each(function(){var e=m.tpl.height();n("iframe",m.tpl).eq(0).height(e-30)})},m.setPopupTitle=function(){window.clever_mega_menu_item_title=n(".edit-menu-item-title",e).val()},m.toggleMega=function(e){switch(e){case!0:m.item.hasClass("clever-mega-menu-item-mega-enabled")||m.item.addClass("clever-mega-menu-item-mega-enabled");break;default:m.item.hasClass("clever-mega-menu-item-mega-enabled")&&m.item.removeClass("clever-mega-menu-item-mega-enabled")}},m.setIcon=function(e){var n=m.item.find(".clever-mega-menu-item-icon");n.length?n.find("i").attr("class",e):m.item.find(".item-title").prepend('<span class="clever-mega-menu-item-icon"><i class="'+e+'"></i></span>')},m.hidePopup=function(){m.tpl.hide(),n("#clever-mega-menu-overlay").remove()},m.openPopup=function(){if(n("#clever-mega-menu-theme").val()){var e;if(window.currentEditItem=m,0<n("iframe",m.tpl).length);else e=cmm4eConfig.editUrl+"&cmm4e_menu_id="+m.navId+"&cmm4e_menu_post_id="+m.menuId,m.tpl.append('<div class="cs-font clever-icon-close-1 cmm4e-close-editor"></div>'),m.tpl.append('<iframe id="clever-mega-menu-item-frame-'+m.menuId+'" src="'+e+'" class="clever-mega-menu-iframe"></iframe>');m.frame=n("iframe",m.tpl).eq(0),m.tpl.attr("id","clever-mega-menu-menu-id-"+m.menuId),n("#clever-mega-menu-overlay").remove(),n("body").append('<div id="clever-mega-menu-overlay"></div>'),n("#clever-mega-menu-overlay").on("click",function(){return m.hidePopup(),!1}),n("body .clever-mega-menu-popup").hide(),m.setPopupTitle(),0<n("#clever-mega-menu-menu-id-"+m.menuId).length?m.autoFrameHeight():(m.autoFrameHeight(),n("body").append(m.tpl),m.autoFrameHeight(),n(window).resize(function(){m.autoFrameHeight()})),m.tpl.show(),n(".cmm4e-close-editor").on("click",t)}else alert(cmm4eL10n.selectMenuTheme)},n(".clever-mega-menu-item-edit-btn",e).on("click",function(){return m.openPopup(e),!1})};jQuery(function(e){var t;"undefined"!=typeof wpNavMenu&&(t=jQuery("#clever-mega-menu-enable-checkbox"),jQuery("li",wpNavMenu.menuList).each(function(){var e=jQuery(this),n=jQuery(".item-title",e),m="clever-mega-menu-item-edit-btn";t.is(":checked")&&(m="clever-mega-menu-item-edit-btn clever-mega-menu-active-edit-btn"),0===jQuery(".clever-mega-menu-item-edit-btn",e).length&&(n.append('<span class="'+m+'"><i class="dashicons dashicons-admin-customizer"></i>'+cmm4eL10n.editBtn+"</span>"),new i(e))})),e("form#update-nav-menu").submit(function(){e("body .clever-mega-menu-popup").remove()})}),window.clever_menu_data_item_changes=function(e,n){window.currentEditItem.tpl.hide(),n.is_update||jQuery("iframe",window.currentEditItem.tpl).remove(),jQuery("#clever-mega-menu-overlay").remove(),cleverMenuItems[window.currentEditItem.menuId]=n.settings,window.currentEditItem.settings=n.settings,""!==n.settings.cmm4e_icon&&window.currentEditItem.setIcon(n.settings.cmm4e_icon),"yes"===n.settings.enable_mega?window.currentEditItem.item.addClass("clever-mega-menu-item-mega-enabled"):window.currentEditItem.item.removeClass("clever-mega-menu-item-mega-enabled"),"undefined"!=typeof wpNavMenu&&(wpNavMenu.menusChanged=!1)}}(jQuery);